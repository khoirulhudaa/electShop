import{i as p,r as m,j as e,L as x}from"./index-c43d25d1.js";import{d as a,f as g,N as b,i as y,e as N,a as v}from"./index-61f77665.js";import{B as u}from"./index-75ae6465.js";import{f as C}from"./toRupiah-23cacd66.js";import{A as i}from"./api-273c7fe6.js";import{C as _}from"./cart-25bec486.js";import{A as n}from"./index-5af015b0.js";import"./sweetalert2-react-content.es-a297bc4b.js";const E=()=>{const t=p(s=>s.authReducer.auth),[o,h]=m.useState([]),[d,c]=m.useState(!1);m.useEffect(()=>{(async()=>{try{const r=await i.getAllHistoryBuy(t==null?void 0:t.consumer_id);h(r.data.data),c(!1)}catch(r){console.log(r.message)}})()},[d]);const f=async(s,r)=>{(await i.removeHistoryConsumer(s,r)).data.status===200&&(n({title:"success",text:"Delete history!",icon:"success",showCancelButton:!1}),c(!0))},j=async(s,r)=>{const l=await i.updateStatusPayment(s,r);l.data.message&&(n({title:"success",text:`${l.data.message}`,icon:"success",showCancelButton:!1}),c(!0))},w=async(s,r)=>{const l=await i.updateStatusPayment(s,r);l.data.message&&(n({title:"success",text:`${l.data.message}`,icon:"success",showCancelButton:!1}),c(!0))};return e.jsx(e.Fragment,{children:o&&o.filter(s=>s.email_consumer===(t==null?void 0:t.email_consumer)).length!==0?o==null?void 0:o.map(s=>s.products.map((r,l)=>e.jsxs("div",{className:"relative md:flex w-full mt-4 h-max rounded-lg bg-white shadow-sm mb-[24px] overflow-hidden",children:[e.jsx("div",{className:"w-full md:w-[30%] min-h-max flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:`https://huda.descode.id/uploads/${r==null?void 0:r.product_image}`,alt:"fotoProduct",className:"w-[80%] md:w-[55%] my-auto"})}),e.jsxs("div",{className:"relative w-full md:w-[70%] border-l my-auto border-l-slate-300 h-[90%] px-[20px] py-[20px]",children:[e.jsx("div",{className:"absolute rounded-full right-[25%] bottom-5 hover:brightness-[90%] active:scale-[0.98] cursor-pointer w-[40px] h-[40px] flex items-center justify-center text-green-500 shadow-lg",children:e.jsxs("small",{className:"bg-blue-500 text-white rounded-full flex items-center justify-center w-[40px] h-[40px] text-[12px] absolute",children:[r==null?void 0:r.quantityInCart," Pcs"]})}),e.jsx(x,{to:`/profileShop/${r==null?void 0:r.shop_id}`,children:e.jsx("div",{className:"absolute rounded-full border border-green-500 right-[14%] bottom-5 hover:brightness-[90%] active:scale-[0.98] cursor-pointer w-[40px] h-[40px] flex items-center justify-center text-green-500 shadow-lg",children:e.jsx(a,{size:14})})}),e.jsx("div",{onClick:()=>f(s==null?void 0:s.history_id,r!=null&&r.idCart?r==null?void 0:r.idCart:""),className:"absolute rounded-full bg-red-500 right-5 bottom-5 hover:brightness-[90%] active:scale-[0.98] cursor-pointer w-[40px] h-[40px] flex items-center justify-center text-white shadow-lg",children:e.jsx(g,{size:14})}),e.jsx("h3",{className:"text-black w-full mb-6 tetx-[16px]",children:r==null?void 0:r.product_name}),e.jsx("h2",{className:"text-[24px] font-bold mb-2",children:C(r==null?void 0:r.total_price)}),e.jsx("hr",{className:"mb-3"}),(s==null?void 0:s.status)==="PENDING"?e.jsx(u,{status:"delete",handleClick:()=>w(s==null?void 0:s.history_id,"CANCELED"),text:"Canceled"}):e.jsx(u,{status:"primary",disabled:(s==null?void 0:s.status)!=="ON-DELIVERY",handleClick:()=>j(s==null?void 0:s.history_id,"ACCEPTED"),text:"Accepted"}),e.jsx("div",{className:`absolute right-[25px] top-[12px] rounded-full w-max h-max px-[10px] text-[14px] py-[6px] text-white ${(s==null?void 0:s.status)==="CANCELED"?"bg-red-500":"bg-blue-500"} flex justify-center items-center`,children:s==null?void 0:s.status})]})]},l))):e.jsxs("div",{className:"w-full h-full rounded-lg mt-4 mb-[24px] text-center flex justify-center items-center",children:[e.jsx(x,{to:"/",children:e.jsx("img",{src:_,alt:"cartIcon",className:"w-[28px]"})}),e.jsx("p",{className:"text-[18px] ml-4 text-slate-500",children:"Your shopping cart is still empty"})]})})},F=()=>{const t=p(o=>o.authReducer.auth);return e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsx("section",{className:"w-screen px-[20px] md:px-[60px] py-[20px] h-max flex",children:e.jsxs("div",{className:"w-full flex items-center py-[10px]",children:[e.jsx(x,{to:"/my-cart",children:e.jsx("div",{className:"rounded-full mr-3 md:ml-[-10px] bg-blue-500 text-white border border-slate-300 cursor-pointer active:scale-[0.98] hover:brightness-[90%] flex items-center justify-center p-1 w-[30px] h-[30px]",children:e.jsx(y,{size:14})})}),e.jsx("h2",{className:"flex text-[20px] font-bold items-center",children:"History"})]})}),e.jsxs("section",{className:"w-screen h-max md:flex px-[20px] md:px-[50px] pb-[40px]",children:[e.jsx("div",{className:"w-full md:w-[70%] mr-6 px-2 md:px-8 py-2 rounded-lg shadow-lg bg-slate-100 border border-slate-300",children:e.jsx(E,{})}),e.jsx("div",{className:"w-full md:w-[30%] rounded-lg bg-slate-100 overflow-hidden shadow-lg pb-2 pt-2 h-max",children:e.jsxs("div",{className:"w-full p-4 h-max rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"w-full border-b border-slate-300 h-max w-full mb-4 pb-4 flex items-center",children:[e.jsx("div",{className:"w-[50px] h-[50px] rounded-full overflow-hidden shadow-lg bg-[black]",children:e.jsx("img",{src:`https://huda.descode.id/uploads/${t==null?void 0:t.consumer_image}`,className:"w-full h-full",alt:"profilePicture"})}),e.jsxs("div",{className:"pl-3",children:[e.jsx("h3",{className:"text-black font-bold",children:t==null?void 0:t.consumer_name}),e.jsxs("small",{className:"text-slate-500 text-[12px]",children:["ID Consumer: ",t==null?void 0:t.consumer_id]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{size:18,style:{marginRight:"19px"}}),e.jsx("p",{children:"Verified Consumer"})]}),e.jsx(x,{to:"/profileUser",children:e.jsx(u,{status:"primary",text:"View profile",style:"mt-8 w-full"})})]})})]}),e.jsx(v,{})]})};export{F as default};
